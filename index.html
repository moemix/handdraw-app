<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HandDraw ‚Äì Camera Hand‚ÄëTracking Canvas</title>
  <style>
    :root{
      --bg: #0b0d10; --panel:#111418; --muted:#2a2f36; --text:#e6e6e6; --acc:#5ee6a7;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial}
    #app{position:fixed;inset:0;display:grid;grid-template-rows:auto 1fr;}

    .toolbar{display:flex;gap:.5rem;align-items:center;padding:.5rem .75rem;background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.35));border-bottom:1px solid var(--muted);backdrop-filter: blur(8px);}
    .toolbar .group{display:flex;gap:.5rem;align-items:center;background:var(--panel);border:1px solid var(--muted);padding:.35rem .5rem;border-radius:14px}
    .btn{appearance:none;border:1px solid var(--muted);background:#15191f;color:var(--text);padding:.4rem .7rem;border-radius:10px;cursor:pointer}
    .btn[aria-pressed="true"]{outline:2px solid var(--acc);border-color:transparent}
    .btn.small{padding:.3rem .55rem}
    .color{width:36px;height:28px;border:1px solid var(--muted);border-radius:8px;background:#000;overflow:hidden;padding:0}
    .color input{width:100%;height:100%;border:0;background:none;padding:0}
    .range{accent-color:var(--acc)}
    .stat{opacity:.8}

    .stage{position:relative;overflow:hidden}
    canvas#draw{position:absolute;inset:0;z-index:2}
    video#cam{position:absolute;right:12px;bottom:12px;width:240px;aspect-ratio:4/3;border-radius:12px;border:1px solid var(--muted);opacity:.35;z-index:3}
    .hint{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.5);border:1px solid var(--muted);padding:.4rem .6rem;border-radius:10px;z-index:4}
    .badge{display:inline-block;background:var(--panel);border:1px solid var(--muted);padding:.2rem .5rem;border-radius:999px;margin-right:.35rem}

    [data-tip]{position:relative}
    [data-tip]:hover::after{content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#000;border:1px solid var(--muted);padding:.25rem .5rem;border-radius:8px;white-space:nowrap;font-size:12px;opacity:.9}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
</head>
<body>
  <div id="app">
    <div class="toolbar" role="toolbar">
      <div class="group" aria-label="Tools">
        <button id="tool-pen" class="btn small" aria-pressed="true" data-tip="Pen (pinch index+thumb to draw)">‚úèÔ∏è Pen</button>
        <button id="tool-eraser" class="btn small" aria-pressed="false" data-tip="Eraser (or pinch middle+thumb)">ü©π Eraser</button>
        <button id="clear" class="btn small" data-tip="Clear canvas (hold 1s üëç gesture or click)">üóëÔ∏è Clear</button>
        <button id="undo" class="btn small" data-tip="Undo (two‚Äëfinger pinch tap)">‚Ü∂ Undo</button>
        <button id="redo" class="btn small" data-tip="Redo">‚Ü∑ Redo</button>
      </div>
      <div class="group" aria-label="Brush">
        <label>Size <input id="size" type="range" min="1" max="40" value="6" class="range"/></label>
        <label class="color" data-tip="Color">
          <input id="color" type="color" value="#5ee6a7" />
        </label>
      </div>
      <div class="group" aria-label="Options">
        <label><input id="showVideo" type="checkbox" checked/> Cam preview</label>
        <label><input id="showLandmarks" type="checkbox"/> Landmarks</label>
      </div>
      <div class="stat" id="stat">Requesting camera access‚Ä¶</div>
    </div>

    <div class="stage">
      <canvas id="draw"></canvas>
      <video id="cam" autoplay muted playsinline></video>
      <div class="hint">
        <span class="badge">Pinch index+thumb = draw</span>
        <span class="badge">Pinch middle+thumb = erase (hold)</span>
        <span class="badge">Two‚Äëfinger pinch tap = undo</span>
      </div>
    </div>
  </div>

<script>
(async () => {
  const hasCameraAccess = await navigator.mediaDevices.getUserMedia({ video: true })
    .then(() => true).catch(() => false);

  const stat = document.getElementById('stat');
  if (!hasCameraAccess) {
    stat.textContent = 'Camera permission denied. Please allow camera access and reload.';
    return;
  }

  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/gh/openai/HandDraw/main.js';
  script.onload = () => stat.textContent = 'Camera initialized.';
  script.onerror = () => stat.textContent = 'Failed to load hand-tracking code.';
  document.body.appendChild(script);
})();
</script>
</body>
</html>
